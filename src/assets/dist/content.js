(()=>{var t={4473:(t,e,r)=>{t.exports=r(1577)},7671:(t,e,r)=>{r(833);var n=r(5703);t.exports=n("Array").find},2236:(t,e,r)=>{var n=r(7046),i=r(7671),o=Array.prototype;t.exports=function(t){var e=t.find;return t===o||n(o,t)&&e===o.find?i:e}},4883:(t,e,r)=>{var n=r(1899),i=r(7475),o=r(9826),a=n.TypeError;t.exports=function(t){if(i(t))return t;throw a(o(t)+" is not a function")}},8479:t=>{t.exports=function(){}},6059:(t,e,r)=>{var n=r(1899),i=r(941),o=n.String,a=n.TypeError;t.exports=function(t){if(i(t))return t;throw a(o(t)+" is not an object")}},3610:(t,e,r)=>{var n=r(6843),i=r(5329),o=r(7026),a=r(9678),s=r(623),c=r(4692),u=i([].push),l=function(t){var e=1==t,r=2==t,i=3==t,l=4==t,d=6==t,p=7==t,f=5==t||d;return function(h,v,y,b){for(var m,g,w=a(h),x=o(w),$=n(v,y),j=s(x),C=0,I=b||c,P=e?I(h,j):r||p?I(h,0):void 0;j>C;C++)if((f||C in x)&&(g=$(m=x[C],C,w),t))if(e)P[C]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return C;case 2:u(P,m)}else switch(t){case 4:return!1;case 7:u(P,m)}return d?-1:i||l?l:P}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},5693:(t,e,r)=>{var n=r(1899),i=r(1052),o=r(4284),a=r(941),s=r(9813)("species"),c=n.Array;t.exports=function(t){var e;return i(t)&&(e=t.constructor,(o(e)&&(e===c||i(e.prototype))||a(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?c:e}},4692:(t,e,r)=>{var n=r(5693);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},2532:(t,e,r)=>{var n=r(5329),i=n({}.toString),o=n("".slice);t.exports=function(t){return o(i(t),8,-1)}},9697:(t,e,r)=>{var n=r(1899),i=r(2885),o=r(7475),a=r(2532),s=r(9813)("toStringTag"),c=n.Object,u="Arguments"==a(function(){return arguments}());t.exports=i?a:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=c(t),s))?r:u?a(e):"Object"==(n=a(e))&&o(e.callee)?"Arguments":n}},2029:(t,e,r)=>{var n=r(5746),i=r(5988),o=r(1887);t.exports=n?function(t,e,r){return i.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},1887:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},5746:(t,e,r)=>{var n=r(5981);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},1333:(t,e,r)=>{var n=r(1899),i=r(941),o=n.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},2861:(t,e,r)=>{var n=r(626);t.exports=n("navigator","userAgent")||""},3385:(t,e,r)=>{var n,i,o=r(1899),a=r(2861),s=o.process,c=o.Deno,u=s&&s.versions||c&&c.version,l=u&&u.v8;l&&(i=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(i=+n[1]),t.exports=i},5703:(t,e,r)=>{var n=r(4058);t.exports=function(t){return n[t+"Prototype"]}},6887:(t,e,r)=>{"use strict";var n=r(1899),i=r(9730),o=r(5329),a=r(7475),s=r(9677).f,c=r(7252),u=r(4058),l=r(6843),d=r(2029),p=r(953),f=function(t){var e=function(r,n,o){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(r);case 2:return new t(r,n)}return new t(r,n,o)}return i(t,this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var r,i,h,v,y,b,m,g,w=t.target,x=t.global,$=t.stat,j=t.proto,C=x?n:$?n[w]:(n[w]||{}).prototype,I=x?u:u[w]||d(u,w,{})[w],P=I.prototype;for(h in e)r=!c(x?h:w+($?".":"#")+h,t.forced)&&C&&p(C,h),y=I[h],r&&(b=t.noTargetGet?(g=s(C,h))&&g.value:C[h]),v=r&&b?b:e[h],r&&typeof y==typeof v||(m=t.bind&&r?l(v,n):t.wrap&&r?f(v):j&&a(v)?o(v):v,(t.sham||v&&v.sham||y&&y.sham)&&d(m,"sham",!0),d(I,h,m),j&&(p(u,i=w+"Prototype")||d(u,i,{}),d(u[i],h,v),t.real&&P&&!P[h]&&d(P,h,v)))}},5981:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},9730:(t,e,r)=>{var n=r(8285),i=Function.prototype,o=i.apply,a=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(o):function(){return a.apply(o,arguments)})},6843:(t,e,r)=>{var n=r(5329),i=r(4883),o=r(8285),a=n(n.bind);t.exports=function(t,e){return i(t),void 0===e?t:o?a(t,e):function(){return t.apply(e,arguments)}}},8285:(t,e,r)=>{var n=r(5981);t.exports=!n((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},8834:(t,e,r)=>{var n=r(8285),i=Function.prototype.call;t.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},5329:(t,e,r)=>{var n=r(8285),i=Function.prototype,o=i.bind,a=i.call,s=n&&o.bind(a,a);t.exports=n?function(t){return t&&s(t)}:function(t){return t&&function(){return a.apply(t,arguments)}}},626:(t,e,r)=>{var n=r(4058),i=r(1899),o=r(7475),a=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?a(n[t])||a(i[t]):n[t]&&n[t][e]||i[t]&&i[t][e]}},4229:(t,e,r)=>{var n=r(4883);t.exports=function(t,e){var r=t[e];return null==r?void 0:n(r)}},1899:(t,e,r)=>{var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},953:(t,e,r)=>{var n=r(5329),i=r(9678),o=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(i(t),e)}},2840:(t,e,r)=>{var n=r(5746),i=r(5981),o=r(1333);t.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},7026:(t,e,r)=>{var n=r(1899),i=r(5329),o=r(5981),a=r(2532),s=n.Object,c=i("".split);t.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?c(t,""):s(t)}:s},1302:(t,e,r)=>{var n=r(5329),i=r(7475),o=r(3030),a=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return a(t)}),t.exports=o.inspectSource},1052:(t,e,r)=>{var n=r(2532);t.exports=Array.isArray||function(t){return"Array"==n(t)}},7475:t=>{t.exports=function(t){return"function"==typeof t}},4284:(t,e,r)=>{var n=r(5329),i=r(5981),o=r(7475),a=r(9697),s=r(626),c=r(1302),u=function(){},l=[],d=s("Reflect","construct"),p=/^\s*(?:class|function)\b/,f=n(p.exec),h=!p.exec(u),v=function(t){if(!o(t))return!1;try{return d(u,l,t),!0}catch(t){return!1}},y=function(t){if(!o(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!f(p,c(t))}catch(t){return!0}};y.sham=!0,t.exports=!d||i((function(){var t;return v(v.call)||!v(Object)||!v((function(){t=!0}))||t}))?y:v},7252:(t,e,r)=>{var n=r(5981),i=r(7475),o=/#|\.prototype\./,a=function(t,e){var r=c[s(t)];return r==l||r!=u&&(i(e)?n(e):!!e)},s=a.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";t.exports=a},941:(t,e,r)=>{var n=r(7475);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},2529:t=>{t.exports=!0},6664:(t,e,r)=>{var n=r(1899),i=r(626),o=r(7475),a=r(7046),s=r(2302),c=n.Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return o(e)&&a(e.prototype,c(t))}},623:(t,e,r)=>{var n=r(3057);t.exports=function(t){return n(t.length)}},2497:(t,e,r)=>{var n=r(3385),i=r(5981);t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},5988:(t,e,r)=>{var n=r(1899),i=r(5746),o=r(2840),a=r(3937),s=r(6059),c=r(3894),u=n.TypeError,l=Object.defineProperty,d=Object.getOwnPropertyDescriptor;e.f=i?a?function(t,e,r){if(s(t),e=c(e),s(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=d(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return l(t,e,r)}:l:function(t,e,r){if(s(t),e=c(e),s(r),o)try{return l(t,e,r)}catch(t){}if("get"in r||"set"in r)throw u("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},9677:(t,e,r)=>{var n=r(5746),i=r(8834),o=r(6760),a=r(1887),s=r(4529),c=r(3894),u=r(953),l=r(2840),d=Object.getOwnPropertyDescriptor;e.f=n?d:function(t,e){if(t=s(t),e=c(e),l)try{return d(t,e)}catch(t){}if(u(t,e))return a(!i(o.f,t,e),t[e])}},7046:(t,e,r)=>{var n=r(5329);t.exports=n({}.isPrototypeOf)},6760:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);e.f=i?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},9811:(t,e,r)=>{var n=r(1899),i=r(8834),o=r(7475),a=r(941),s=n.TypeError;t.exports=function(t,e){var r,n;if("string"===e&&o(r=t.toString)&&!a(n=i(r,t)))return n;if(o(r=t.valueOf)&&!a(n=i(r,t)))return n;if("string"!==e&&o(r=t.toString)&&!a(n=i(r,t)))return n;throw s("Can't convert object to primitive value")}},4058:t=>{t.exports={}},8219:(t,e,r)=>{var n=r(1899).TypeError;t.exports=function(t){if(null==t)throw n("Can't call method on "+t);return t}},4911:(t,e,r)=>{var n=r(1899),i=Object.defineProperty;t.exports=function(t,e){try{i(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},3030:(t,e,r)=>{var n=r(1899),i=r(4911),o="__core-js_shared__",a=n[o]||i(o,{});t.exports=a},8726:(t,e,r)=>{var n=r(2529),i=r(3030);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.22.0",mode:n?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.0/LICENSE",source:"https://github.com/zloirock/core-js"})},4529:(t,e,r)=>{var n=r(7026),i=r(8219);t.exports=function(t){return n(i(t))}},2435:t=>{var e=Math.ceil,r=Math.floor;t.exports=function(t){var n=+t;return n!=n||0===n?0:(n>0?r:e)(n)}},3057:(t,e,r)=>{var n=r(2435),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},9678:(t,e,r)=>{var n=r(1899),i=r(8219),o=n.Object;t.exports=function(t){return o(i(t))}},6935:(t,e,r)=>{var n=r(1899),i=r(8834),o=r(941),a=r(6664),s=r(4229),c=r(9811),u=r(9813),l=n.TypeError,d=u("toPrimitive");t.exports=function(t,e){if(!o(t)||a(t))return t;var r,n=s(t,d);if(n){if(void 0===e&&(e="default"),r=i(n,t,e),!o(r)||a(r))return r;throw l("Can't convert object to primitive value")}return void 0===e&&(e="number"),c(t,e)}},3894:(t,e,r)=>{var n=r(6935),i=r(6664);t.exports=function(t){var e=n(t,"string");return i(e)?e:e+""}},2885:(t,e,r)=>{var n={};n[r(9813)("toStringTag")]="z",t.exports="[object z]"===String(n)},9826:(t,e,r)=>{var n=r(1899).String;t.exports=function(t){try{return n(t)}catch(t){return"Object"}}},9418:(t,e,r)=>{var n=r(5329),i=0,o=Math.random(),a=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++i+o,36)}},2302:(t,e,r)=>{var n=r(2497);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3937:(t,e,r)=>{var n=r(5746),i=r(5981);t.exports=n&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},9813:(t,e,r)=>{var n=r(1899),i=r(8726),o=r(953),a=r(9418),s=r(2497),c=r(2302),u=i("wks"),l=n.Symbol,d=l&&l.for,p=c?l:l&&l.withoutSetter||a;t.exports=function(t){if(!o(u,t)||!s&&"string"!=typeof u[t]){var e="Symbol."+t;s&&o(l,t)?u[t]=l[t]:u[t]=c&&d?d(e):p(e)}return u[t]}},833:(t,e,r)=>{"use strict";var n=r(6887),i=r(3610).find,o=r(8479),a="find",s=!0;a in[]&&Array(1).find((function(){s=!1})),n({target:"Array",proto:!0,forced:s},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(a)},1577:(t,e,r)=>{var n=r(2236);t.exports=n}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=r(4473),e=r.n(t),n=Garnish.Base.extend({emailId:null,langId:null,isActive:!1,$editor:null,$spinner:null,$shade:null,$editorContainer:null,$previewContainer:null,$iframeContainer:null,$results:null,_editorWidth:null,_editorWidthInPx:null,defaultEditorWidth:.33,minEditorWidthInPx:320,init:function(t){this.langId=t.langId,this.emailId=t.emailId,this.editorWidth=this.defaultEditorWidth},get editorWidth(){return this._editorWidth},get editorWidthInPx(){return this._editorWidthInPx},set editorWidth(t){var e;t>=1?(e=t,t/=Garnish.$win.width()):e=Math.round(t*Garnish.$win.width()),e<this.minEditorWidthInPx&&(t=(e=this.minEditorWidthInPx)/Garnish.$win.width()),this._editorWidth=t,this._editorWidthInPx=e},open:function(){var t,r=this;if(!this.isActive){if(this.isActive=!0,$(document.activeElement).trigger("blur"),!this.$editor){this.$shade=$("<div/>",{class:"modal-shade dark"}).appendTo(Garnish.$bod),this.$previewContainer=$("<div/>",{class:"lp-preview-container"}).appendTo(Garnish.$bod),this.$editorContainer=$("<div/>",{class:"lp-editor-container"}).appendTo(Garnish.$bod);var n=$("<header/>",{class:"flex"}).appendTo(this.$editorContainer);this.$editor=$("<form/>",{class:"lp-editor"}).appendTo(this.$editorContainer);var i=$("<button/>",{type:"button",class:"btn",text:Craft.t("app","Close Preview")}).appendTo(n),o=$("<button/>",{type:"button",class:"btn",text:Craft.t("app","Refresh")}).appendTo(n);$("<div/>",{class:"flex-grow"}).appendTo(n),this.$spinner=$("<div/>",{class:"spinner hidden",title:Craft.t("app","Saving")}).appendTo(n),this.$iframeContainer=$("<div/>",{class:"lp-iframe-container"}).appendTo(this.$previewContainer),this.addListener(i,"click","close"),this.addListener(o,"click",(function(){r.updateIframe()}))}this.updateWidths(),this.addListener(Garnish.$win,"resize","updateWidths"),this.$editorContainer.css(Craft.left,-this.editorWidthInPx+"px"),this.$previewContainer.css(Craft.right,-this.getIframeWidth()),e()(t=$("#content")).call(t,">*").appendTo(this.$editor),this.updateIframe(),this.slideIn()}},close:function(){var t,r=this;this.isActive&&this.isVisible&&($("html").removeClass("noscroll"),this.removeListener(Garnish.$win,"resize"),this.removeListener(Garnish.$bod,"keyup"),e()(t=this.$editor).call(t,">*").appendTo($("#content")),this.$shade.delay(200).velocity("fadeOut"),this.$editorContainer.velocity("stop").animateLeft(-this.editorWidthInPx,"slow",(function(){r.$editorContainer.hide(),r.trigger("slideOut")})),this.$previewContainer.velocity("stop").animateRight(-this.getIframeWidth(),"slow",(function(){r.$previewContainer.hide()})),this.isActive=!1,this.isVisible=!1)},updateWidths:function(){this.editorWidth=this.editorWidth,this.$editorContainer.css("width",this.editorWidthInPx+"px"),this.$previewContainer.width(this.getIframeWidth())},_updateRefreshBtn:function(){this.$refreshBtn.removeClass("hidden")},getIframeWidth:function(){return Garnish.$win.width()-this.editorWidthInPx},updateIframe:function(){var t=this;if(!this.isActive)return!1;var e=Craft.getUrl("emails/preview/"+this.emailId+"/"+this.langId),r={subject:$("#field-subject").val(),body:$("#field-body-field .redactor-in").html()};$("#field-body-field .redactor-in").length||(r.body=$("#field-body").val()),this.$iframeContainer.html(""),axios.post(e,r).then((function(e){e.data.subjectError&&t.$iframeContainer.append('<div class="warning-banner">'+e.data.subjectError),e.data.bodyError&&t.$iframeContainer.append('<div class="warning-banner">'+e.data.bodyError);var r=$('<div id="email-preview">');t.$iframeContainer.append(r),r.append("<label>"+Craft.t("emails","Subject")+'</label>                <div class="subject">                    '+e.data.subject+"                </div>"),r.append("<label>"+Craft.t("emails","Body")+"</label>");var n=$('<div class="iframe-wrapper">');r.append(n);var i=$("<iframe/>",{frameborder:0});n.append(i),i[0].contentWindow.document.open(),i[0].contentWindow.document.write(e.data.body),i[0].contentWindow.document.close()})).catch((function(e){console.log(e);var r=e.response.data.error;t.$iframeContainer.append('<div class="error-banner">Error while fetching preview : '+r)}))},slideIn:function(){var t=this;this.isActive&&!this.isVisible&&($("html").addClass("noscroll"),this.$shade.velocity("fadeIn"),this.$editorContainer.show().velocity("stop").animateLeft(0,"slow",(function(){t.trigger("slideIn"),Garnish.$win.trigger("resize")})),this.$previewContainer.show().velocity("stop").animateRight(0,"slow",(function(){t.addListener(Garnish.$bod,"keyup",(function(t){t.keyCode===Garnish.ESC_KEY&&this.close()}))})),this.isVisible=!0)}});Craft.Emails.EmailContent=Garnish.Base.extend({jsSettings:null,livePreview:null,langId:null,email:null,init:function(t){this.langId=t.langId,this.jsSettings=t.jsSettings,this.email=t.email,this.initLivePreview(),this.initAddTranslation(),this.initDelete(),new Craft.AssetSelectInput(this.jsSettings)},initLivePreview:function(){var t=this;this.livePreview=new n({langId:this.langId,emailId:this.email.id}),$(".js-preview").click((function(){t.livePreview.open()}))},initAddTranslation:function(){$(".js-add-translation").click((function(t){t.preventDefault();var e=$(this).attr("href");$.ajax({url:Craft.getActionUrl("emails/cp-emails/add-translation"),data:{localeId:$(this).data("locale"),key:this.email.key},dataType:"json"}).fail((function(t){Craft.Emails.handleError(t)})).done((function(t){window.location.href=e}))}))},initDelete:function(){var t=this;$(".js-delete").click((function(e){if(e.preventDefault(),confirm(Craft.t("emails","Are you sure you want to delete this translation?"))){var r=$(e.target).attr("href");$.ajax({url:Craft.getActionUrl("emails/cp-emails/delete-translation"),data:{localeId:$(e.target).data("locale"),key:t.email.key},dataType:"json"}).fail((function(t){Craft.Emails.handleError(t)})).done((function(t){window.location.href=r}))}}))}})})()})();